export const getPersona = (scores) => {
    if (!scores) return { title: "결과 없음", desc: "" };

    // 강점/약점 로직
    const sorted = Object.entries(scores).filter(([k, v]) => k !== 'total').sort((a, b) => b[1] - a[1]);
    const top = sorted[0];
    const bottom = sorted[sorted.length - 1];

    if (scores.total >= 80) {
        return {
            title: "[황금빛 균형의 달인]",
            desc: "재정부터 인간관계까지, 빈틈없이 섬세하게 준비하신 인생 2막의 교과서입니다."
        };
    }

    if (top[0] === 'financial' && bottom[0] === 'social') {
        return {
            title: "[내실 있는 조용한 자산가]",
            desc: "곳간은 든든히 채우셨지만, 이제는 마음을 나눌 따뜻한 이웃과 친구로 연락처를 채워가실 때입니다."
        };
    }

    if ((top[0] === 'health' || top[0] === 'career') && bottom[0] === 'financial') {
        return {
            title: "[열정 넘치는 액티브 시니어]",
            desc: "몸과 마음의 젋음은 완벽합니다! 다만, 오늘부터는 지갑의 무게도 함께 늘려갈 현명한 계획이 필요하네요."
        };
    }

    if (top[0] === 'residence' && (bottom[0] === 'financial' || bottom[0] === 'career')) {
        return {
            title: "[내 집 마련의 승리자]",
            desc: "평생 일궈낸 든든한 보금자리가 있으시군요. 이제 이 집을 활용해 매월 현금이 마르지 않는 샘물로 만드실 차례입니다."
        };
    }

    if ((top[0] === 'health' || top[0] === 'financial') && (bottom[0] === 'health' || bottom[0] === 'social')) {
        return {
            title: "[신중한 안락 추구형]",
            desc: "재정적 안정을 우선시하며 조용하고 평온한 일상을 즐기고 계십니다. 이제 아주 조금만 문을 열고 새로운 활동을 만나보시면 어떨까요?"
        };
    }

    // 기본 문구
    return {
        title: "[꾸준한 전진의 시니어]",
        desc: "더 나은 내일을 위해 차곡차곡 준비하고 계십니다. 조금만 더 보완하면 완벽한 인생 2막이 열릴 것입니다."
    };
};

export const getStatusText = (categoryId, score) => {
    const data = {
        financial: {
            good: "단단한 3층 연금 구조를 잘 만들어 두셨습니다. 자녀 지원에 대한 뚜렷한 기준까지 세워두신 덕분에 앞으로의 현금 흐름이 무척 안정적입니다.",
            warning: "기본적인 노후 자금은 갖추셨습니다. 다만 자산이 부동산에 치우쳐 있지는 않은지, 필요할 때 쉽게 현금화할 수 있는지 한 번쯤 점검해 보시면 좋겠습니다.",
            danger: "은퇴 후의 살림살이에 조금 더 꼼꼼한 대비가 필요합니다. 무리한 자녀 지원은 멈추시고, 부채를 줄여나가는 안전한 자산 관리를 지금 당장 시작하셔야 합니다."
        },
        residence: {
            good: "병원과 교통이 편리한 좋은 보금자리를 마련하셨군요. 필요하다면 주택연금 등으로 유연하게 대처할 마음의 준비까지, 아주 훌륭합니다.",
            warning: "현재 거주지는 안정적이지만, 훗날 관리가 버거워질 넓은 집이나 병원이 멀어질 상황에 대비해 주거 규모 축소(다운사이징)를 천천히 고민해 볼 시기입니다.",
            danger: "앞으로 주거 유지 비용이 큰 짐이 될 수 있습니다. 외곽의 아담하고 편안한 곳으로 보금자리를 옮기거나, 주택연금을 활용하는 방안을 진지하게 가족과 상의해 보세요."
        },
        health: {
            good: "평소 꾸준히 돌본 몸과 마음이 가장 큰 재산입니다. 불시의 간병비 부담이 닥쳐도 가족이 흔들리지 않게 든든한 방어막을 잘 쳐두셨네요.",
            warning: "지금은 크게 아픈 곳이 없으시더라도, 큰 병이나 간병 상황처럼 뜻밖의 의료비가 필요할 때를 위해 예비비나 보험을 다시 훑어볼 필요가 있습니다.",
            danger: "무엇보다 선생님의 건강이 은퇴 생활의 1순위입니다. 다른 무엇보다 이번 주에는 꼭 시간을 내어 종합검진을 예약하시고, 가벼운 동네 산책부터 시작해 보세요."
        },
        social: {
            good: "직장 명함을 내려놓아도 오롯이 '나'로서 환영받을 수 있는 따뜻한 사람들을 곁에 두셨군요. 활기차고 외롭지 않은 노후가 기대됩니다.",
            warning: "지금까지는 주로 회사 동료들과 소통해 오셨다면, 이제는 동네 주민이나 같은 취미를 즐기는 친구들로 만남의 폭을 서서히 옮겨가실 때입니다.",
            danger: "은퇴 후 소속감이 사라지면 마음이 몹시 공허해질 수 있습니다. 오늘 저녁, 가장 먼저 배우자나 가족과 편안하게 차 한잔하며 대화하는 시간을 가져보세요."
        },
        career: {
            good: "휴대폰과 인터넷을 능숙하게 다루시며 배울 준비가 되어 계십니다! 취미를 살려 소소한 수입도 얻는 멋진 'N잡러'의 자질이 엿보입니다.",
            warning: "디지털 기기가 낯설지는 않으시군요. 여기서 한 걸음만 더 나아가, 내 관심사를 살려 무언가 새로운 것을 배우거나 소일거리로 연결해 보는 건 어떨까요?",
            danger: "키오스크나 스마트폰 앱이 낯설다고 피하지만 마시고 한 번만 용기 내어 부딪혀 보세요. 동네 주민센터나 구청에서 열리는 재밌는 시니어 스마트 강좌를 눈여겨보시길 권합니다."
        }
    };

    if (score >= 80) return data[categoryId].good;
    if (score >= 50) return data[categoryId].warning;
    return data[categoryId].danger;
};

export const getPrescriptionTitle = (categoryId) => {
    switch (categoryId) {
        case 'financial': return "✂️ 10% 보험 다이어트와 자녀 지원 기준 세우기";
        case 'residence': return "🏘️ 주택연금 수령액 확인해 보기";
        case 'health': return "👟 계단 오르기와 간병 계획 나누기";
        case 'social': return "☕ 동네 기반의 작은 모임 찾아보기";
        case 'career': return "📱 자녀나 후배에게 새로운 앱 하나 다과 건네며 배우기";
        default: return "";
    }
}

export const getPrescriptionDesc = (categoryId) => {
    switch (categoryId) {
        case 'financial': return "이번 주말, 배우자와 마주 앉아 자녀의 결혼이나 교육에 '정확히 얼마까지만' 보탬이 될지 명확한 선을 그어보세요. 또한, 달마다 나가는 보험료가 소득의 10%를 넘는다면 과감히 정리하여 똘똘한 현금을 쥐어두세요.";
        case 'residence': return "시간 나실 때 주택금융공사 누리집에 접속하셔서, 지금 사는 집으로 매월 연금을 얼마나 받을 수 있는지 꼭 한 번 확인해 보세요. 집은 단순히 물려주는 곳이 아니라, 내 든든한 노후 지갑이 되어야 합니다.";
        case 'health': return "오늘부터 엘리베이터 대신 한두 층이라도 무조건 계단으로 올라가 보세요. 그리고 훗날 몸이 크게 편찮으실 때 '어떤 요양 환경을 원하는지' 가족들과 부담 없이, 하지만 분명하게 이야기를 나누어 두세요.";
        case 'social': return "과장님, 부장님으로 불리던 무거운 자리는 이제 서서히 내려놓으세요. 스마트폰에 '당근' 등 동네 모임 앱을 깔아보시고, 집 근처 걷기 모임이나 독서 모임 중 마음에 드는 딱 한 곳만 용기 내어 나가보세요.";
        case 'career': return "시간 가는 줄 모르고 흠뻑 빠져들 만한 일이 있으신가요? 아직 없다면, 이번 주말 자녀나 후배에게 밥 한 끼 사주시면서 평소 궁금했던 기차 예매 앱이나 영상 편집 앱 사용법을 즐겁게 배워 보세요.";
        default: return "";
    }
}

export const getAgeComment = (ageRange) => {
    if (ageRange === '40') {
        return "은퇴가 아직 멀게 느껴지시나요? 40대는 자녀 교육비로 내 노후 몫의 눈덩이가 가장 쉽게 녹아내리는 시기입니다. 나를 희생하며 자녀에게 모든 것을 쏟아붓는 것이, 훗날 오히려 자녀의 어깨를 무겁게 하는 짐이 되지 않도록 지금 내 노후 자금의 울타리를 단단히 쳐야 합니다.";
    }
    if (ageRange === '50') {
        return "정든 직장과의 이별이 조금씩 보이기 시작하는 50대, 지금 가장 훌륭한 재테크는 수익보다 '자산 지키기'입니다. 위험한 투자 대신 복잡한 재산을 단순하게 정리하시고, 은퇴 후에도 매월 현금이 꼬박꼬박 들어오는 흐름(파이프라인)을 점검할 마지막 골든타임입니다. 직장의 명함을 내려놓고 진짜 '나'라는 사람으로 살아가는 훈련을 시작하세요.";
    }
    return "자유롭고 홀가분한 인생 2막에 오르신 60대 선생님, 지금 가장 확실하고 가치 있는 투자는 바로 '건강'과 작은 '일거리'입니다. 몸이 아프면 억만금의 자산도 빛이 바랩니다. 큰돈을 벌겠다는 마음 대신, 한 달에 단돈 30만 원이라도 내가 즐거워서 몸을 움직일 수 있는 소소한 일을 찾으며 보람찬 하루하루를 만끽하세요.";
};
